<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>

<style>
    #btn{
        border: 0;
        background-color: rgb(255, 255, 255);
        text-decoration: none;
        color: black;
    }
</style>

    <title>Ciphers</title>
</head>

<body>
    <h3 style="text-align: center;">Ciphers</h3>
    <div class="container">
        <div class="form-floating">
            <textarea class="form-control" id="textarea" placeholder="Enter Message for Encoding" id="floatingTextarea2"
                style="height: 100px"></textarea>
            <label for="floatingTextarea2">Enter Your Mesaage</label>
            <button class="btn btn-primary my-3" onclick="encryption()" type="button">Generate Cipher Text</button>
            <button class="btn btn-primary my-3" onclick="decryption()" type="button">Generate Plain Text</button>
        </div>
        <button onclick="check()" id="btn">See Key</button>
        <span id="op1" style="visibility:hidden;"> : ABC</span>
        <div id="op" class="container-fluid border border-1" style="width: 70%;"></div>
    </div>
    <script>
        let c=0;
        function check() {
            
            if(c%2===0){
                document.getElementById('op1').style.visibility = 'visible';
                //document.getElementById('btn').style.visibility = 'hidden';
            }else{
                document.getElementById('op1').style.visibility = 'hidden';
               // document.getElementById('btn').style.visibility = 'visible';
            }
           c++;
        }
        function encryption() {
            // let key = 4;
            let key = Math.round(Math.random() * (25 - 1) + 1);
            let temp = "", temp1;
            let str = document.querySelector('#textarea').value.toUpperCase();
            if(str.length <= 0){
                alert("Please Enter Message !!!");
            }else{
            let ar = str.split('');

            for (let i = 0; i < ar.length; i++) {
                if (ar[i].charCodeAt() >= 65 && ar[i].charCodeAt() < 91) {
                    if (ar[i].charCodeAt() + key > 90) {
                        for (let j = 1; j <= key; j++) {
                            if (ar[i].charCodeAt() + j > 90) {
                                temp1 = 65 + (key - j);
                                temp = temp + String.fromCharCode(temp1);
                                break;
                            }
                        }
                    } else {
                        temp1 = ar[i].charCodeAt() + key;
                        temp = temp + String.fromCharCode(temp1);
                    }

                }

                else if (ar[i].charCodeAt() === 46) { // .
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else if (ar[i].charCodeAt() === 44) { // ,
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else if (ar[i].charCodeAt() === 63) { // ?
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else {
                    temp = temp + " Undefine ";
                }
            }
            document.querySelector('#op').innerHTML = temp + String.fromCharCode(key + 65);


            
                document.querySelector('#op1').innerHTML = " : " + key + " " + String.fromCharCode(key + 65);
                
        }
        }

        function decryption() {
            let temp = "", temp1;
            let str = document.querySelector('#textarea').value.toUpperCase();

            if(str.length <= 1){
                alert("Please Enter Message !!!");
            }else{

            let ar = str.split('');
            let key = ar[ar.length - 1].charCodeAt() - 65;
            for (let i = 0; i < ar.length - 1; i++) {
                if (ar[i].charCodeAt() >= 65 && ar[i].charCodeAt() < 91) {
                    if (ar[i].charCodeAt() - key < 65) {
                        for (let j = 1; j <= key; j++) {
                            if (ar[i].charCodeAt() - j < 65) {
                                temp1 = 91 - (key - j + 1);
                                temp = temp + String.fromCharCode(temp1);
                                break;
                            }
                        }
                    } else {
                        temp1 = ar[i].charCodeAt() - key;
                        temp = temp + String.fromCharCode(temp1);
                    }

                }
                else if (ar[i].charCodeAt() === 13) { // enter
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else if (ar[i].charCodeAt() === 32) {
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else if (ar[i].charCodeAt() === 46) { // .
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else if (ar[i].charCodeAt() === 44) { // ,
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else if (ar[i].charCodeAt() === 63) { // ?
                    temp = temp + String.fromCharCode(ar[i].charCodeAt());
                }
                else {
                    temp = temp + " Undefine ";
                }
            }

            document.querySelector('#op').innerHTML = temp;
           
                document.querySelector('#op1').innerHTML = " : " + key;
        }
                   }
    </script>


    <!--   <script type="text/Javascript">
            function random(){
                //let a=0,b=25;
                return Math.random() * (26 - 0) + 0;
            }
            function myfun(){
                let input = document.querySelector("#textarea").value;
                input = input.toUpperCase();
                let x= document.getElementById("op");
                let key = 2;
                let arr = [];
                let temp = 0;
                if(x.hasChildNodes()){
                   // x.parentNode.removeChild(x);
                     while (x.firstChild) {
                        x.removeChild(x.firstChild);
                    } 
                }
               /*  else{
                   // document.querySelector("#op1").innerHTML = "No";
                } */
                

               //Lorem ipsum dolor sit, amet consectetur adipisicing elit. Odit similique quisquam temporibus explicabo nostrum dolorem totam nisi eum consequuntur voluptatum minima, minus veritatis unde sed expedita, consectetur, id deserunt adipisci?
               let temp1 = "";
                arr = input.split('');
                for(let i=0;i<input.length;i++){
                //Jayraj ABC
                if(arr[i] === 'Y'){
                    // 89 + key - 65; 91
                        temp = 64 + key;
                }
                else if(arr[i] === 'Z'){
                    // 89 + key - 65; 91
                        temp = 65 + key;
                }
                else if(arr[i] === ' '){
                    // 89 + key - 65; 91
                        temp = 32;
                }
                else{
                    temp = arr[i].charCodeAt() + key;
                }
                
               
                temp1 = temp1 + String.fromCharCode(temp);

                let li = document.createElement("span");
                li.innerHTML = String.fromCharCode(temp);
                document.getElementById("op").appendChild(li);

                document.querySelector("#op1").innerHTML = temp1;
              //  document.querySelector("#op1").innerHTML = temp + " : " + String.fromCharCode(temp);
            }
                //document.querySelector("#op").innerHTML = arr[1].charCodeAt();
               /*  arr.map((e)=>{}
                 
                ) */
                /* for (i = 0; i < 26; i++) {
                    var li = document.createElement("li");
                    li.innerHTML = "letter " + (i+10).toString(36) + " ";
                    li.style.listStyle = "none";
                    li.style.display = "block";
                    document.getElementById("op").appendChild(li);
                } */
            }
        </script> -->

</body>

</html>